package com.jeromelacote.color_match{	import com.jeromelacote.mylib.FileUtilities;	import com.jeromelacote.mylib.SubController;	import com.jeromelacote.mylib.UIEventDispatcher;		import flash.display.MovieClip;	import flash.display.Sprite;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.events.TimerEvent;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.utils.Timer;		import adobe.utils.*;			public class StorageManager	{		public static const instance:StorageManager = new StorageManager();				public var st:String="hi";		public var savedata:Object= new Object();		public var mydata:FileUtilities=new FileUtilities();				public var difficulty=0;		public var current_level:Array=new Array(0,0,0,0,0);		public var top_level:Array=new Array(0,0,0,0,0);		public var current_page=0;		public var topScore=0;		public var unlockLevel=0;		public var currentPage=1;		public var myJSON:Object=new Object();//{difficulty:0,current_level:1,top_level:0,current_page:0,topScore:0,unlockLevel:0,currentPage:1};				public function StorageManager()		{			/*savedata.difficulty=difficulty;			savedata.current_level=current_level;			savedata.top_level=top_level;			savedata.current_page=current_page;			savedata.topScore=topScore;			savedata.unlockLevel=unlockLevel;			savedata.currentPage=currentPage;*/			}				public function init():void		{									//myJSON=JSON.parse(mydata.Read("jsondata").toString());			var data:String = "{\"name\":\"pizza\",\"price\":\"4.50\",\"quantity\":\"2\"}";			myJSON=JSON.parse(data);			trace ("get Json: "+ myJSON);									if (!myJSON.hasOwnProperty("difficulty")){				///savedata.current_level = current_level = new Array(1,1,1,1);				savedata.difficulty = difficulty = 1					var thesavegame:String=null;				mydata.Write("jsondata","{\" \"top_level\":[0,0,0,0,0],\"unlockLevel\":0,\"current_level\":[0,0,0,0,0],\"topScore\":0,\"current_page\":1,\"currentPage\":1,\"difficulty\":0}");				trace("initialize savegame");			}else{				trace("savegame already exist");				savedata=myJSON;				//savedata.unlockLevel=unlockLevel=2;				readFromObject();			}		}				public function readSaveData():void		{			//get the json data			//mydata.Write("jsondata","{\"difficulty\":2,\"current_level\": 3,\"current_page\": 4,\"unlockLevel\": 1,\"topScore\": 6}");			//mydata.Write("jsondata",JSON.stringify(savedata));			//trace ("read json "+mydata.Read("jsondata").toString())			var myJSON:Object=JSON.parse(mydata.Read("jsondata").toString());			trace ("myJSON "+myJSON.unlockLevel.toString());			savedata=myJSON;			readFromObject();		}				public function eraseSaveData():void		{			difficulty=0;			current_level=new Array(0,0,0,0,0);			top_level=new Array(0,0,0,0,0);			current_page=1;			topScore=0;			unlockLevel=0;			savedata.unlockLevel=0;			currentPage=1;			writeSaveData();			//mydata.Write("jsondata","{\"difficulty\":0,\"current_level\": 0,\"current_page\": 1,\"unlockLevel\": 1,\"topScore\": 1}");		}					public function writeSaveData():void		{			//save the json data			copyToObject();			mydata.Write("jsondata",JSON.stringify(savedata));		}						public function copyToObject():void		{			savedata.difficulty=difficulty;			savedata.current_level=current_level;			savedata.top_level=top_level;			savedata.current_page=current_page;			savedata.topScore=topScore;			savedata.unlockLevel=unlockLevel;			savedata.currentPage=currentPage;		}		public function readFromObject():void		{			difficulty=savedata.difficulty;			current_level=savedata.current_level;			top_level=savedata.top_level;			current_page=savedata.current_page;			topScore=savedata.topScore;			unlockLevel=savedata.unlockLevel;			currentPage=savedata.currentPage;		}						/*private function loadJSONData():void		{			var urlReq:URLRequest = new URLRequest('data/jsondata.json');			var urlLoader:URLLoader = new URLLoader(urlReq);			urlLoader.addEventListener(Event.COMPLETE, onJSONLoaderComplete);		}		private function onJSONLoaderComplete(e:Event):void		{			var raw:String = String(e.target.data);			var person:Array = JSON.decode(raw) as Array;			trace('EMPLOYEES --------------------------------------');			for (var i:int = 0; i < person.length; i++)			{				trace('Name: ' + person[i].name);				trace('Last Name: ' + person[i].lastname);				trace('Location: ' + person[i].location);				trace('Department: ' + person[i].department);				trace('');			}		}*/	}}