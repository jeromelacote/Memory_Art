package com.jeromelacote.exploration{		import caurina.transitions.*;		import com.jeromelacote.exploration.ContentEvent;		import flash.display.DisplayObject;	import flash.display.MovieClip;	import flash.events.*;	import flash.events.TransformGestureEvent;	import flash.filters.DropShadowFilter;	import flash.filters.GlowFilter;	import flash.geom.Rectangle;	import flash.media.Sound;	import flash.net.URLRequest;	import flash.ui.Multitouch;	import flash.ui.MultitouchInputMode;		public class Content extends MovieClip	{		public var canvas_height:Number=640;		public var canvas_width:Number=960;		public var maxscreenX=3;		public var maxscreenY=1;		public var maxX=-canvas_width*maxscreenX;		public var maxY=-canvas_height*maxscreenY;		public var targetX:Number=0;		public var targetY:Number=0;		public var _LITE:Boolean=false;					public function Content()		{			super();			//trace ("hi, I'm here");			setbuttons(this);			//if(!_LITE){			//this.addEventListener(TransformGestureEvent.GESTURE_PAN, onPan);			this.addEventListener(TransformGestureEvent.GESTURE_SWIPE, onSwipe);			//}			positionContent(0,-1);			var revt:ContentEvent = new ContentEvent( ContentEvent.ON_MOVECONTENT );			revt.data=new Array(0,-1);			UIEventDispatcher.INSTANCE.dispatchEvent(revt);					} 				public function positionContent(xpos:Number, ypos:Number){			trace("---------------------positionContent");			this.y=ypos*canvas_height;			this.x=xpos*canvas_width;					}				function onPan (e:TransformGestureEvent):void{			trace("->onPan x:"+e.offsetX+"y: "+e.offsetY );			this.x+=e.offsetX;			this.y+=e.offsetY;			trace("->MOVE x:"+this.x+"y: "+this.y );			_TestPosLimit()		}						function  _TestPosLimit(){			if(this.y>0)			{				this.y=0;trace("ouside y 0");				}			if(this.x>0){				this.x=0;trace("ouside x 0");				}			if(this.y<maxY)			{				this.y=maxY;trace("ouside y max");			}			if(this.x<maxX)			{				this.x=maxX;trace("ouside x max");			}		}				function onSwipe (e:TransformGestureEvent):void{						var directionX:Number=e.offsetX;			var directionY:Number=e.offsetY;			moveContent(directionX,directionY);		}				public function moveContent(directionX:Number, directionY:Number):void {									//need to detect where we are			targetX=Math.round(this.x/canvas_width);			targetY=Math.round(this.y/canvas_height);						if (directionX == 1) {				//User swiped towards right				targetX += 1;			}			if (directionX == -1) {				//User swiped towards left				targetX -= 1;			}			if (directionY == 1) {				//User swiped towards bottom				targetY += 1;			}			if (directionY == -1) {				//User swiped towards top				targetY -= 1;			}									if(targetY>0)			{				targetY=0;			}			if(targetX>0){				targetX=0;			}			if(targetY<-maxscreenY)			{				targetY=-maxscreenY;			}			if(targetX<-maxscreenX)			{				targetX=-maxscreenX;			}						Tweener.addTween(this,{x:(targetX*canvas_width),y:(targetY*canvas_height),time:.8,delay:0,transition:'easeOutQuint'});						var evt:ContentEvent = new ContentEvent( ContentEvent.ON_MOVECONTENT );			evt.data=new Array(targetX,targetY);			UIEventDispatcher.INSTANCE.dispatchEvent(evt);		}				public function setbuttons(mc:MovieClip):void {			trace("->setbuttons");						if (mc.numChildren == 0) {				return;			}				var i:int;			var numKids:uint = mc.numChildren;			var kid:DisplayObject;						for (i = 0; i < numKids; i++) 			{				kid = mc.getChildAt(i);				if (!kid)				{					continue;				}								if (kid is MovieClip)				{					if (kid.name.indexOf("CREATURE_") == 0)					{						var mckid=kid as MovieClip;						mckid.addEventListener(MouseEvent.CLICK, creatureClick);						mckid.buttonMode = true;						mckid.mouseChildren = false;						//trace ("register: "+mckid.name);					}				}			}		}						public function creatureClick(e:Event):void {			trace("->creatureClick "+ e.target.name);			var mc=e.target;			var myname:String= e.target.name.substring(9,e.target.name.length);			//mc.filters=[];			//var snd:snd_plane=new snd_plane();			//snd.play();			var snd:Sound=new Sound();			//snd.load(new URLRequest("snd_"+myname+".mp3"))			//snd.play();			//play animation			if(mc.currentFrame==1){				mc.gotoAndPlay("_anim");			}		}	}}